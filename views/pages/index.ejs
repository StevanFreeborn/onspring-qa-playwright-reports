<!DOCTYPE html>
<html lang="en">

<%- include('../partials/_head', { title: title }) %>

<body>
  <main>
    <h1>Hello World</h1>
    <button type="button" id="logout">Log out</button>
  </main>
</body>

<script>
  document.getElementById('logout').addEventListener('click', logOutUser);
  const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

  async function logOutUser() {
    const response = await fetch('/logout', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        _csrf: csrfToken,
      }),
    });

    if (response.redirected) {
      window.location.href = response.url;
    }
  }
</script>

</html>